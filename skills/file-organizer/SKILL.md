# File Organizer

**智能文件整理工具** - 基于 Hazel 和 DropIt 模式

自动分类、重命名、归档文件，保持桌面整洁。

---

## 核心特性

### 📁 整理规则

| 规则 | 说明 |
|------|------|
| **按类型** | 图片/文档/视频分类 |
| **按日期** | 年月日文件夹结构 |
| **按项目** | 项目相关文件归类 |
| **智能重命名** | 批量重命名规范化 |

### 🔄 自动化

```
监控文件夹 → 匹配规则 → 执行操作 → 记录日志
```

---

## 使用方法

### 整理桌面
```bash
file-organizer organize ~/Desktop --by-type
```

### 按日期归档
```bash
file-organizer organize ~/Downloads --by-date --move-to ~/Archive
```

### 创建整理规则
```bash
file-organizer rule add --pattern "*.pdf" --action move --target ~/Documents/PDFs
```

---

## 质量保障体系

⚠️ **质量状态**: 本Skill处于早期版本，质量保障体系待完善。建议在完成以下改进后投入生产使用。

### 安全与风险控制 (P0)

**试运行模式 (Dry Run)**  
所有整理操作默认进入试运行模式，生成预览报告，用户确认后执行：
```bash
# 试运行 - 仅预览不执行
file-organizer organize ~/Desktop --by-type --dry-run --output preview.html

# 确认后正式执行
file-organizer organize ~/Desktop --by-type --confirm
```

**自动备份与回滚**  
```bash
# 自动备份原始状态
file-organizer backup --source ~/Desktop --output backup_$(date +%Y%m%d).tar.gz

# 整理操作
file-organizer organize ~/Desktop --by-type

# 如需回滚
file-organizer rollback --backup backup_20250219.tar.gz
```

**操作审计日志**  
```
[2026-02-19 10:30:15] INFO: 开始整理 /Users/wang/Desktop
[2026-02-19 10:30:15] INFO: 发现文件 156 个
[2026-02-19 10:30:16] INFO: 移动: report.pdf → /Documents/PDFs/report.pdf
[2026-02-19 10:30:16] WARN: 跳过: locked_file.doc (文件被占用)
[2026-02-19 10:30:17] INFO: 整理完成: 成功 154 个, 跳过 2 个
```

### PDCA质量循环

```
Plan (计划)
├── 整理目标定义 (文件数量目标)
├── 规则设计 (按类型/日期/项目)
├── 冲突解决策略
└── 风险预案
        ↓
Do (执行)
├── 试运行预览
├── 备份原始状态
├── 执行整理
└── 记录日志
        ↓
Check (检查)
├── 完整性验证
├── 用户确认
├── 异常处理
└── 效果评估
        ↓
Act (处理)
├── 规则优化
├── 模板更新
├── 知识沉淀
└── 标准化
```

### 精益文件管理

**浪费识别**:  
| 浪费类型 | 表现 | 消除措施 |
|---------|------|---------|
| 等待 | 整理过程无反馈 | 进度条+实时日志 |
| 动作 | 手动编写规则 | 可视化规则构建器 |
| 缺陷 | 文件误分类 | 智能规则推荐+预览 |
| 过度加工 | 过度复杂的重命名 | 简化规则模板 |

**5S文件管理**:  
1. **整理**: 删除不需要的文件
2. **整顿**: 建立清晰的文件夹结构
3. **清扫**: 定期清理临时文件
4. **清洁**: 维护整理规则
5. **素养**: 养成及时归档习惯

### 约束管理

**系统约束**:  
1. 文件系统权限
2. 文件锁定（使用中）
3. 用户信任度

**约束应对**:  
- **权限**: 提前检测，记录无法处理的文件
- **锁定**: 重试机制+跳过标记
- **信任**: 试运行+备份+回滚

### 质量保证检查清单

**整理前检查**:  
- [ ] 是否启用了试运行模式?
- [ ] 是否已创建备份?
- [ ] 规则是否已验证?
- [ ] 目标目录是否有足够空间?
- [ ] 目标目录是否有写入权限?

**整理中监控**:  
- [ ] 进度是否正常?
- [ ] 是否有错误发生?
- [ ] 系统资源是否充足?

**整理后验证**:  
- [ ] 文件总数是否一致?
- [ ] 重要文件是否在预期位置?
- [ ] 是否有文件丢失?
- [ ] 用户是否确认结果?

### 持续改进

**改进路线图**:  

**Phase 1 - 安全基础 (立即)**  
- [ ] 实现试运行模式
- [ ] 实现自动备份
- [ ] 实现回滚功能
- [ ] 补充完整文档

**Phase 2 - 功能完善 (本月)**  
- [ ] 实现冲突解决策略
- [ ] 实现重复文件检测
- [ ] 提供预设规则模板
- [ ] 增加进度反馈

**Phase 3 - 体验优化 (本季度)**  
- [ ] 开发可视化规则构建器
- [ ] 实现智能规则推荐
- [ ] 支持多平台适配
- [ ] 建立用户反馈机制

### 参考实现对比

| 功能 | Hazel | DropIt | Organize | 本Skill目标 |
|-----|-------|--------|----------|------------|
| 可视化规则 | ✅ | ✅ | ❌ | Phase 3 |
| 试运行模式 | ✅ | ✅ | ❌ | Phase 1 |
| 撤销功能 | ✅ | ❌ | ❌ | Phase 1 |
| 预设模板 | ✅ | ✅ | ❌ | Phase 2 |
| 跨平台 | ❌ | ❌ | ✅ | Phase 3 |

### 使用建议

**当前版本 (v1.0.0)**:  
- ⚠️ 不建议在生产环境使用
- ✅ 适合学习和概念验证
- ✅ 小批量文件测试（<100个文件）
- ✅ 在隔离环境测试（虚拟机/测试目录）

**安全使用流程**:  
1. 选择测试目录（重要文件请备份）
2. 使用 `--dry-run` 预览整理效果
3. 确认无误后，手动执行关键操作
4. 验证整理结果

---

## 参考实现

- **Hazel**: macOS 文件自动化
- **DropIt**: Windows 文件整理
- **Organize**: Python 文件组织工具

---

## 版本信息

- **Version**: 1.0.0 (草案版)
- **Author**: KbotGenesis
- **Quality Status**: 待完善 - 参见 QUALITY_ANALYSIS_REPORT.md
