# Cybernetics

**创始人**: Norbert Wiener (1948)  
**核心著作**: 《控制论》(Cybernetics)  
**类型**: 系统与因果  
**优先级**: P0

---

## 核心概念

### 控制论定义
> 研究动物和机器中的控制与通信的科学

**核心要素**:
- **目标/参考值**: 系统要维持的状态
- **传感器**: 测量当前状态
- **比较器**: 计算偏差 (目标-现状)
- **控制器**: 决定如何调整
- **执行器**: 实施调整
- **反馈**: 调整后的效果回流

### 反馈控制系统

```
参考值 ──→ ⊕ ──→ 控制器 ──→ 执行器 ──→ 系统 ──→ 输出
            ↑-                         ↓
            └──────────────── 传感器 ←─┘

负反馈: 减少偏差 (稳定系统)
正反馈: 放大偏差 (增长或崩溃)
```

---

## 控制类型

### 1. 开环控制 vs 闭环控制

```
开环控制 (无反馈):
输入 ──→ 控制器 ──→ 执行器 ──→ 输出

特点:
- 简单、快速
- 对扰动无响应
- 适合确定性环境

闭环控制 (有反馈):
输入 ──→ 控制器 ──→ 执行器 ──→ 系统 ──→ 输出
          ↑                           ↓
          └──────── 传感器 ───────────┘

特点:
- 能应对扰动
- 能自我校正
- 可能振荡或延迟
```

### 2. 控制层级

```
战略层 (慢速、大范围):
├─ 目标设定
├─ 资源配置
└─ 政策制定

战术层 (中速、中范围):
├─ 计划调整
├─ 协调优化
└─ 性能监控

操作层 (快速、小范围):
├─ 实时调节
├─ 异常处理
└─ 自动执行
```

### 3. 自适应控制

```
标准控制: 固定参数
自适应控制: 根据环境变化调整参数

自适应循环:
1. 监测系统性能
2. 识别环境变化
3. 调整控制参数
4. 验证新参数效果
5. 重复
```

---

## 控制论在业务中的应用

### 应用场景1: 自动化运营系统

```
目标: 维持系统稳定性 (99.9%可用性)

控制回路设计:

监控层:
├─ 传感器: 系统指标采集 (CPU、内存、响应时间)
├─ 参考值: SLA目标 (响应<200ms, 错误率<0.1%)
└─ 比较器: 计算偏差

决策层:
├─ 控制器: 规则引擎
│   ├─ IF 响应时间>200ms THEN 扩容
│   ├─ IF 错误率>0.1% THEN 告警+降级
│   └─ IF CPU>80% THEN 限流
└─ 预测器: 负载预测 (提前5分钟扩容)

执行层:
├─ 执行器: 自动扩缩容、流量切换
└─ 反馈: 调整后指标回流

控制品质指标:
├─ 稳态误差: 长期偏离目标的平均值
├─ 超调量: 调整过程中超过目标的程度
├─ 调节时间: 达到稳定所需时间
└─ 振荡次数: 稳定前震荡次数
```

### 应用场景2: 策略优化闭环

```
策略控制系统:

参考输入: 业务目标 (DAU增长10%/月)

控制循环:
┌─────────────────────────────────────────────┐
│ 1. 计划 (Plan)                              │
│    ├─ 制定策略假设                          │
│    └─ 设定KPI目标                           │
│                     ↓                       │
│ 2. 执行 (Do)                                │
│    ├─ 实施策略                              │
│    └─ 采集数据                              │
│                     ↓                       │
│ 3. 监控 (Check)                             │
│    ├─ 对比实际vs目标                        │
│    └─ 识别偏差                              │
│                     ↓                       │
│ 4. 调整 (Act)                               │
│    ├─ 分析偏差原因                          │
│    └─ 调整策略参数                          │
│                     ↓                       │
│ 回到步骤1                                   │
└─────────────────────────────────────────────┘

控制参数:
├─ 采样周期: 每日/每周
├─ 控制增益: 调整幅度
└─ 死区范围: 可接受的误差范围
```

---

## 控制系统设计原则

### 1. 稳定性优先

```
系统稳定的条件:
├─ 负反馈占主导
├─ 响应速度匹配系统惯性
└─ 增益适中 (太小无效果，太大振荡)

不稳定的表现:
├─ 发散振荡 (振幅越来越大)
├─ 持续震荡 (等幅振荡)
└─ 缓慢漂移 (向错误方向漂移)
```

### 2. 鲁棒性设计

```
鲁棒控制: 在参数变化或扰动下保持稳定

设计策略:
├─ 多模型控制: 针对不同场景预设参数
├─ 滑模控制: 强制系统沿预定轨迹运行
└─ H∞控制: 优化最坏情况下的性能
```

### 3. 信息论视角

```
Wiener: 控制 = 信息处理

信息量 = 不确定性减少量

好的控制系统:
├─ 传感器提供足够信息
├─ 控制器有效处理信息
└─ 执行器准确执行指令

信息瓶颈:
├─ 传感器精度不足
├─ 传输延迟
└─ 控制器处理能力有限
```

---

## Kbot控制论框架

### /control 命令

```
/control "设计用户增长控制系统"

输出:
├─ 目标设定: DAU增长10%/月
├─ 传感器: 日活、留存、获客成本
├─ 控制器: 渠道投放、产品优化
├─ 执行器: 自动出价、A/B测试
└─ 反馈回路: 每日数据回流

控制参数建议:
├─ 监控频率: 每日
├─ 调整阈值: 偏差>5%时干预
└─ 超调限制: 单次调整幅度<20%
```

### 检查清单

- [ ] 目标是否清晰可量化？
- [ ] 传感器是否覆盖关键变量？
- [ ] 控制器响应速度是否匹配？
- [ ] 反馈回路是否闭合？
- [ ] 系统是否稳定？
- [ ] 是否考虑了鲁棒性？

---

*控制论的本质：用信息对抗熵增。*
