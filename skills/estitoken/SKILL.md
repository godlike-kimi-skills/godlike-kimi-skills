# EstiToken / Tokenæ¶ˆè€—ä¼°ç®—å™¨

**ğŸ† é‡‘å°çº§ (AAA)** - æ™ºèƒ½ä»»åŠ¡Tokenæ¶ˆè€—ä¼°ç®—ä¸æˆæœ¬åˆ†æ

> ç²¾å‡†çš„Tokené¢„ç®—ç®¡ç†ï¼Œè®©æ¯ä¸€åˆ†ç®—åŠ›éƒ½ç‰©å°½å…¶ç”¨ã€‚

---

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ å¤šç»´åº¦Tokenä¼°ç®—
- **æ–‡æœ¬ä¼°ç®—**: æ”¯æŒä¸­è‹±æ–‡æ··åˆæ–‡æœ¬çš„Tokenè®¡ç®—
- **æ–‡ä»¶ä¼°ç®—**: è‡ªåŠ¨åˆ†ææ–‡ä»¶/ç›®å½•çš„Tokenæ¶ˆè€—
- **ä»»åŠ¡ä¼°ç®—**: åŸºäºä»»åŠ¡ç±»å‹å’Œå†å²æ•°æ®æ™ºèƒ½é¢„æµ‹

### ğŸ’° æˆæœ¬åˆ†æ
- **å¤šæ¨¡å‹å®šä»·**: æ”¯æŒKimiã€GPTã€Claudeç­‰ä¸»æµæ¨¡å‹
- **å®æ—¶æˆæœ¬**: è‡ªåŠ¨è®¡ç®—é¢„æœŸæˆæœ¬ï¼ˆUSD/CNYï¼‰
- **é¢„ç®—é¢„è­¦**: è¶…å‡ºé¢„ç®—é˜ˆå€¼æ—¶è‡ªåŠ¨æé†’

### ğŸ“Š ç»Ÿè®¡è¿½è¸ª
- **ä½¿ç”¨è®°å½•**: è‡ªåŠ¨è®°å½•æ¯æ¬¡ä¼°ç®—å†å²
- **è¶‹åŠ¿åˆ†æ**: ç”ŸæˆTokenä½¿ç”¨è¶‹åŠ¿æŠ¥å‘Š
- **æ¨¡å‹å¯¹æ¯”**: ä¸åŒæ¨¡å‹çš„æˆæœ¬æ•ˆç›Šåˆ†æ

### ğŸ”§ å¼€å‘é›†æˆ
- **CI/CDé›†æˆ**: æ”¯æŒGitHub Actionsç­‰æµæ°´çº¿
- **Pre-commité’©å­**: æäº¤å‰è‡ªåŠ¨ä¼°ç®—å˜æ›´Tokenæ¶ˆè€—
- **APIæ¥å£**: æä¾›Python APIä¾›å…¶ä»–å·¥å…·è°ƒç”¨

---

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä¼°ç®—

```bash
# ä¼°ç®—æ–‡æœ¬Tokenæ•°
kimi estitoken "è¿™æ˜¯ä¸€æ®µéœ€è¦ä¼°ç®—çš„ä¸­æ–‡æ–‡æœ¬"

# ä¼°ç®—æ–‡ä»¶
kimi estitoken --file README.md

# ä¼°ç®—æ•´ä¸ªç›®å½•
kimi estitoken --dir ./src --pattern "*.py"
```

### ä»»åŠ¡æˆæœ¬ä¼°ç®—

```bash
# ä¼°ç®—ç‰¹å®šä»»åŠ¡çš„Tokenæ¶ˆè€—
kimi estitoken --task "é‡æ„ä¸€ä¸ªä¸­å‹Pythoné¡¹ç›®" --complexity medium

# ä¼°ç®—ä»£ç å®¡æŸ¥æˆæœ¬
kimi estitoken --task "å®¡æŸ¥1000è¡Œä»£ç " --model kimi-k2

# æ‰¹é‡ä¼°ç®—
kimi estitoken --batch tasks.json
```

### æˆæœ¬åˆ†æ

```bash
# æŸ¥çœ‹æˆæœ¬æŠ¥å‘Š
kimi estitoken --report

# å¯¹æ¯”ä¸åŒæ¨¡å‹æˆæœ¬
kimi estitoken --compare --file document.md --models kimi,gpt4,claude

# è®¾ç½®é¢„ç®—è­¦å‘Š
kimi estitoken --budget 100000 --alert 80
```

### CI/CDé›†æˆ

```bash
# GitHub Actionsä¸­ä½¿ç”¨
kimi estitoken --ci --diff HEAD~1 --limit 50000

# ä¼°ç®—PRå˜æ›´
kimi estitoken --pr --base main --head feature-branch
```

---

## æ ¸å¿ƒç®—æ³•

### Tokenè®¡ç®—æ¨¡å‹

```python
# ä¸­æ–‡: çº¦ 1.5 å­—ç¬¦/token
# è‹±æ–‡: çº¦ 4 å­—ç¬¦/token
# ä»£ç : çº¦ 3.5 å­—ç¬¦/token

def estimate_tokens(text: str, content_type: str = "mixed") -> int:
    if content_type == "chinese":
        return len(text) // 1.5
    elif content_type == "english":
        return len(text) // 4
    elif content_type == "code":
        return len(text) // 3.5
    else:  # mixed
        return len(text) // 3
```

### ä»»åŠ¡å¤æ‚åº¦ç³»æ•°

| å¤æ‚åº¦ | ç³»æ•° | é€‚ç”¨åœºæ™¯ |
|--------|------|----------|
| Low | 1.0x | ç®€å•ç¼–è¾‘ã€æ–‡ä»¶è¯»å– |
| Medium | 2.5x | ä»£ç é‡æ„ã€æ–‡æ¡£ç”Ÿæˆ |
| High | 5.0x | æ¶æ„è®¾è®¡ã€å¤æ‚è°ƒè¯• |
| Expert | 8.0x | ç®—æ³•è®¾è®¡ã€ç³»ç»Ÿè§„åˆ’ |

---

## è¾“å‡ºç¤ºä¾‹

### å•æ–‡ä»¶ä¼°ç®—

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    Token ä¼°ç®—æŠ¥å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ æ–‡ä»¶: README.md
ğŸ“Š å­—ç¬¦æ•°: 2,450
ğŸ“ Tokenæ•°: ~816

ğŸ’° æˆæœ¬ä¼°ç®—:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å‹            â”‚ è¾“å…¥æˆæœ¬     â”‚ è¾“å‡ºæˆæœ¬     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ kimi-for-coding â”‚ $0.0008      â”‚ $0.0041      â”‚
â”‚ kimi-k2         â”‚ $0.0020      â”‚ $0.0102      â”‚
â”‚ gpt-4           â”‚ $0.0245      â”‚ $0.0735      â”‚
â”‚ claude-3        â”‚ $0.0122      â”‚ $0.0612      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… çŠ¶æ€: åœ¨é¢„ç®—èŒƒå›´å†…
```

### é¡¹ç›®æ‰¹é‡ä¼°ç®—

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 é¡¹ç›® Token ä¼°ç®—æ±‡æ€»
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ ç›®å½•: ./src
ğŸ” åŒ¹é…: *.py (25 files)

æ–‡ä»¶ç»Ÿè®¡:
- æ€»å­—ç¬¦æ•°: 156,780
- æ€»è¡Œæ•°: 4,320
- ä¼°ç®—Token: ~52,260

ä»»åŠ¡é¢„ä¼° (ä¸­ç­‰å¤æ‚åº¦é‡æ„):
- è¾“å…¥Token: ~52,260
- è¾“å‡ºToken: ~26,130 (0.5x)
- æ€»è®¡: ~78,390 tokens

ğŸ’° é¢„ä¼°æˆæœ¬ (kimi-k2):
- å•æ¬¡æ‰§è¡Œ: $0.16
- 10æ¬¡è¿­ä»£: $1.56
- 50æ¬¡è¿­ä»£: $7.82

âš ï¸ è­¦å‘Š: æ¥è¿‘ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ (78K / 200K)
å»ºè®®: åˆ†æ‰¹å¤„ç†æˆ–å¯ç”¨context folding
```

---

## æŠ€æœ¯å®ç°

```python
# æ ¸å¿ƒåŠŸèƒ½ç¤ºä¾‹
from estitoken import TokenEstimator, CostAnalyzer

# åˆ›å»ºä¼°ç®—å™¨
estimator = TokenEstimator()

# ä¼°ç®—æ–‡ä»¶
tokens = estimator.estimate_file("src/main.py")
print(f"Estimated: {tokens} tokens")

# æˆæœ¬åˆ†æ
analyzer = CostAnalyzer(model="kimi-k2")
cost = analyzer.calculate_cost(input_tokens=tokens, output_tokens=tokens//2)
print(f"Estimated cost: ${cost:.4f}")

# æ‰¹é‡ä¼°ç®—
batch = estimator.estimate_directory("./src", pattern="*.py")
report = analyzer.generate_report(batch)
```

---

## å‚è€ƒé¡¹ç›®

- **tiktoken**: OpenAIçš„Tokenè®¡æ•°åº“
- **transformers**: HuggingFaceçš„TokenåŒ–å·¥å…·
- **tokenizers**: Rustå®ç°çš„é«˜æ€§èƒ½TokenåŒ–

---

## ç‰ˆæœ¬ä¿¡æ¯

- **Version**: 1.0.0
- **Author**: Godlike Kimi Skills
- **License**: MIT
- **Tags**: token, estimation, cost-analysis, budgeting, optimization
