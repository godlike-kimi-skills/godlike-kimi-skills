# Theory of Constraints (TOC)

**创始人**: Eliyahu M. Goldratt (1984)  
**核心著作**: 《目标》(The Goal)  
**类型**: 系统优化  
**优先级**: P0

---

## 核心原则

> "任何系统至少存在一个约束，否则系统将无限产出。" — Goldratt

### 五大聚焦步骤 (Five Focusing Steps)

```
┌─────────────────────────────────────────────────────────────┐
│  1. IDENTIFY    识别系统的约束（瓶颈）                      │
│       ↓                                                     │
│  2. EXPLOIT     挖尽约束的潜能（最大化瓶颈产出）            │
│       ↓                                                     │
│  3. SUBORDINATE 迁就约束（其他一切服从瓶颈节奏）            │
│       ↓                                                     │
│  4. ELEVATE     打破约束（提升瓶颈能力）                    │
│       ↓                                                     │
│  5. REPEAT      回到步骤1（警惕惯性成为新约束）             │
└─────────────────────────────────────────────────────────────┘
```

---

## 约束识别方法

### 物理约束识别

```
系统流程分析:

[输入] → [工序A] → [工序B] → [工序C] → [输出]
           ↓         ↓         ↓
         100/h     80/h      120/h

约束识别:
├─ 工序A: 产能100/h > 需求, 非约束
├─ 工序B: 产能80/h = 系统产出, ⚠️ 约束!
└─ 工序C: 产能120/h > 上游, 非约束

结论: 工序B是系统约束
```

### 市场约束识别

当产能 > 需求时，约束在市场:
```
系统产能: 1000单位/天
市场需求: 800单位/天

约束: 市场 (需求不足)
策略: 市场开发, 而非产能扩张
```

### 政策/管理约束识别

```
示例: 
- "我们从不加班" (政策约束)
- "必须平衡各产线负载" (管理约束)
- "所有产品利润率必须>30%" (财务约束)

这些可能是人为制造的假性约束
```

---

## 挖尽约束 (Exploit)

### 约束资源最大化原则

```
约束资源时间分配:
├─ 有效产出: [ ] (创造收入的工作)
├─ 准备时间: [ ] (必要但无产出)
├─ 闲置等待: [ ] (应最小化)
└─ 无效工作: [ ] (必须消除)

目标: 最大化有效产出时间占比
```

### 常见挖尽策略

| 问题 | 挖尽策略 |
|------|----------|
| 瓶颈设备故障 | 预防性维护 + 快速维修能力 |
| 瓶颈等待物料 | 优先保证瓶颈供料 |
| 瓶颈操作效率低 | 技能培训 + 标准化操作 |
| 瓶颈换型时间长 | SMED快速换型 |
| 瓶颈质量波动 | 源头质量控制 |

---

## 迁就约束 (Subordinate)

### 非约束资源管理原则

> "非约束资源的效率不重要，重要的是配合约束"

```
错误做法:
[工序A] 100%效率 → 积压库存 → [工序B瓶颈] 80%效率

正确做法:
[工序A] 80%效率 → 按需生产 → [工序B瓶颈] 100%效率

关键: 非约束资源允许闲置，约束资源必须满负荷
```

### DBR调度法

```
Drum-Buffer-Rope (鼓-缓冲-绳)

Drum (鼓 - 瓶颈节拍):
- 瓶颈的产出节奏决定整个系统的节奏
- 以瓶颈产能为基准制定主生产计划

Buffer (缓冲):
- 瓶颈前的在制品缓冲，保护瓶颈不受扰动
- 缓冲大小 = 保护时间 × 需求波动

Rope (绳 - 牵引):
- 瓶颈向入口发出信号，控制物料投放
- 投放节奏 = 瓶颈消耗节奏
```

---

## 打破约束 (Elevate)

### 打破策略优先级

```
成本效益排序:
1. 挖尽现有能力 (零成本)
2. 减少准备/换型时间 (低成本)
3. 增加班次/加班 (中低成本)
4. 外包瓶颈工序 (中成本)
5. 购买额外产能 (高成本)
6. 流程重新设计 (高成本)
```

### Kbot应用: 业务瓶颈突破

```
场景: AI内容生成服务

约束识别:
├─ 需求: 100篇/天
├─ 生成能力: 200篇/天 (非约束)
├─ 人工审核: 80篇/天 ⚠️ 约束!
└─ 发布上线: 150篇/天 (非约束)

挖尽约束 (审核环节):
- 制定审核SOP，减少犹豫时间
- 预审分类，简单内容快速通过
- 高峰期全员投入审核

迁就约束:
- 生成环节按需生产，不超过80篇/天
- 不追求生成100%效率

打破约束:
- 短期: 招聘兼职审核员
- 中期: 开发AI辅助审核
- 长期: 用户自审+抽检机制

新的系统产出: 150篇/天 (发布成为新约束)
```

---

## 吞吐量会计 (Throughput Accounting)

### 指标体系

```
吞吐量(T): 系统通过销售赚钱的速度
T = 销售收入 - 完全变动成本

库存(I): 系统投入在库存上的资金

运营费用(OE): 将库存转化为吞吐量的费用

目标: 最大化净利润和ROI
净利润 = T - OE
ROI = (T - OE) / I
```

### 与传统成本会计的区别

| 维度 | 传统成本会计 | 吞吐量会计 |
|------|-------------|-----------|
| 目标 | 降低成本 | 增加吞吐量 |
| 效率 | 所有环节都重要 | 只有约束重要 |
| 库存 | 资产 | 负债 |
| 局部优化 | 鼓励 | 警惕 |

---

## 思维转变检查清单

- [ ] 是否识别了真正的系统约束？
- [ ] 是否挖尽了约束潜能？
- [ ] 非约束是否迁就了约束？
- [ ] 是否有计划打破约束？
- [ ] 打破后是否回到步骤1？
- [ ] 是否避免了局部最优陷阱？

---

*优化非约束等于浪费，优化约束等于增长。*
