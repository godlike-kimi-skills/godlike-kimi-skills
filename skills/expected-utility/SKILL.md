# Expected Utility & Prospect Theory

**理论基础**: Kahneman & Tversky (1979), von Neumann-Morgenstern  
**类型**: 决策与判断  
**优先级**: P0

---

## 核心理论

### 1. 期望效用理论 (Expected Utility Theory)

理性决策的数学基础：

```
EU = Σ P(i) × U(i)

其中:
- P(i) = 结果i发生的概率
- U(i) = 结果i的效用值
- EU = 期望效用
```

**公理体系**:
1. **完备性**: 可比较所有选项
2. **传递性**: A>B, B>C → A>C
3. **独立性**: 独立于无关选项
4. **连续性**: 存在概率使选择无差异

### 2. 前景理论 (Prospect Theory)

真实人类决策行为模型：

```
价值函数: V(x) = x^α (if x≥0) 或 -λ(-x)^β (if x<0)
概率加权: π(P) = P^γ / (P^γ + (1-P)^γ)^(1/γ)

典型参数:
- α = β = 0.88 (收益/损失敏感度)
- λ = 2.25 (损失厌恶系数)
- γ = 0.61 (概率加权)
```

**四大效应**:

| 效应 | 描述 | 商业启示 |
|------|------|----------|
| **确定效应** | 对确定收益过度加权 | 锁定部分收益 |
| **反射效应** | 损失域风险寻求 | 止损必须果断 |
| **损失厌恶** | 损失痛苦≈2.25×收益快乐 | 避免下行风险 |
| **小概率效应** | 高估小概率事件 | 保险/彩票设计 |

---

## 决策分析框架

### 步骤1: 结果识别
```
决策: [具体决策]

可能结果:
├─ 结果A: [描述] 概率: P(A)
├─ 结果B: [描述] 概率: P(B)
└─ 结果C: [描述] 概率: P(C)

验证: ΣP = 100%
```

### 步骤2: 效用量化

**收益效用表** (示例):

| 金额 | 效用值 | 计算方式 |
|------|--------|----------|
| $0 | 0 | 基准 |
| $1,000 | 10 | √1000/√10 |
| $10,000 | 31.6 | 平方根标准化 |
| $100,000 | 100 | 参考点 |

**风险偏好分类**:
- **风险厌恶** (λ > 1): 大多数人
- **风险中性** (λ = 1): 理性模型
- **风险寻求** (λ < 1): 特殊场景

### 步骤3: 前景价值计算

```python
# 伪代码
def prospect_value(outcomes, probabilities):
    total_value = 0
    for outcome, prob in zip(outcomes, probabilities):
        # 价值函数
        if outcome >= 0:
            v = outcome ** 0.88
        else:
            v = -2.25 * (-outcome) ** 0.88
        
        # 概率加权
        pi = prob ** 0.61 / (prob ** 0.61 + (1-prob) ** 0.61) ** (1/0.61)
        
        total_value += pi * v
    
    return total_value
```

### 步骤4: 方案对比

```
方案对比表:

| 方案 | 期望效用(EU) | 前景价值(PV) | 风险等级 | 建议 |
|------|-------------|-------------|---------|------|
| A    | 45.2        | 38.7        | 低      | 保守选择 |
| B    | 52.1        | 41.3        | 中      | 平衡选择 |
| C    | 48.9        | 35.2        | 高      | 避免 |
```

---

## Kbot应用场景

### 场景1: 项目投资决策

```
决策: 是否投资10万启动新项目

结果分析:
├─ 成功 (30%): 收益50万 → 净收益40万
├─ 持平 (40%): 收益10万 → 持平
└─ 失败 (30%): 损失10万 → 净损失10万

期望效用计算:
EU = 0.3×U(40) + 0.4×U(0) + 0.3×U(-10)
   = 0.3×63.2 + 0.4×0 + 0.3×(-22.5×3.16)
   = 18.96 - 21.35 = -2.39

前景理论分析:
- 损失厌恶导致负面倾向
- 建议: 降低投资额或提高成功概率
```

### 场景2: 定价策略

```
产品定价决策:

方案A (高价): $100, 销量80%概率达标
方案B (中价): $70, 销量95%概率达标
方案C (低价): $50, 销量100%概率达标

消费者前景价值:
- 高价: 感知价值120, 价格100 → 净收益20
- 中价: 感知价值100, 价格70 → 净收益30
- 低价: 感知价值80, 价格50 → 净收益30

结论: 中价方案前景价值最优
```

### 场景3: 止损决策

```
当前项目状态: 已投入5万, 预计还需投入5万

前景理论分析:
- 沉没成本: 5万 (不可回收)
- 继续投入期望: 0.4×10万收益 - 0.6×5万损失 = 1万
- 前景价值: 已经处于损失域, 倾向于风险寻求(继续投入)

理性决策:
- 边际分析: 只看未来5万投入的预期回报
- 结论: 预期回报1万 > 0, 但风险过高
- 建议: 设定硬性止损线, 避免损失扩大
```

---

## 损失规避预案

### 预案模板

```
决策: [X]

风险识别:
├─ 风险1: [描述] 概率: P1 影响: I1
├─ 风险2: [描述] 概率: P2 影响: I2
└─ 风险3: [描述] 概率: P3 影响: I3

损失规避策略:
1. 对冲: [如何降低下行风险]
2. 保险: [转移风险的机制]
3. 止损: [何时退出]
4. 分段: [分批投入降低风险]

最大可接受损失: [金额]
触发止损条件: [具体条件]
```

---

## 深度认知分析: 偏差识别与决策优化

### 1. 认知偏差维度分析 (Cognitive Biases Lens)

期望效用理论与前景理论构成**认知偏差的双面镜**——前者展示理性应该如何决策，后者揭示人类实际如何决策，两者对比精准定位了系统性偏差。

**损失厌恶的量化暴露**: 前景理论的核心发现是λ=2.25的损失厌恶系数。这个数字本身就是对**禀赋效应**和**沉没成本谬误**的数学诊断。当人们坚持亏损项目时，框架将其解释为"损失域的风险寻求"，提供了具体的干预靶点。

**确定效应与概率加权偏差**: π(P)函数显示人类如何将客观概率40%主观感知为32%，而将2%感知为8%。这种系统性扭曲解释了为何人们同时购买彩票（高估小概率）和拒绝合理赌注（低估中概率）。

**框架效应的解构**: 同一决策以"90%存活率"和"10%死亡率"表述会导致不同选择。EU理论要求统一的价值计算，而前景理论的价值函数V(x)以参考点为原点的设计，正是为了捕捉这种参照点依赖的非理性。

**反射效应的发现**: 在收益域人们风险厌恶（偏好确定收益），在损失域却风险寻求（偏好赌博翻盘）。EU理论无法解释这种不一致，而前景理论的S型价值函数完美解释了这一悖论，揭示了**心理账户**的边界效应。

### 2. 行为经济学维度分析 (Behavioral Economics Lens)

这一框架是行为经济学的**核心引擎**，将心理学发现转化为可操作的决策工具。

**现状偏差的成本量化**: 通过机会成本计算，框架将"什么都不做"的隐性成本显式化。EU计算要求为每个选项分配概率和效用，迫使决策者将"维持现状"与"改变"放在同一评估维度。

**双系统理论的实践映射**: 卡尼曼的系统1（直觉）对应前景理论描述的人类实际行为；系统2（理性）对应EU理论的规范模型。框架的存在本身就是训练系统2接管重大决策的**认知脚手架**。

**心理账户的结构化处理**: 前景理论将决策分解为"编辑阶段"（框定问题）和"评估阶段"（计算价值）。这种两阶段模型为**心理账户**的打开提供了方法论——要求显式定义参考点、结果分类和概率评估。

**时间偏好的折现校准**: 虽然框架未显式包含时间维度，但EU的传递性公理和连续性公理为跨期选择提供了基础。结合双曲折现理论，可以构建对抗**现时偏差**的决策工具。

### 3. 助推理论维度分析 (Nudge Theory Lens)

EU/前景理论框架本身就是**选择架构设计**的理论基础，理解偏差是为了设计更好的助推。

**默认选项的理性设计**: 了解损失厌恶后，可以将"自动加入退休计划"设为默认（利用禀赋效应使人们不愿退出），或将"健康食品"放在自助餐厅视线平齐处（利用可得性）。EU分析帮助预测这些设计的效用影响。

**反馈信息的框架优化**: 知道人们对损失的敏感度是收益的2.25倍，可以优化信息呈现——将"节能可节省$200"重新框架为"不节能将损失$200"，利用损失厌恶驱动行为改变。

**简化复杂选择的算法**: 面对多属性决策时，EU计算可能过于复杂。框架支持**显著性启发**的设计——突出最重要的2-3个属性，降低决策负荷同时保留关键信息。

**承诺机制的助推设计**: 了解人们在损失域的风险寻求后，可以设计**预先承诺**机制（如止损单、存款锁定），利用事前理性自我约束事后情绪自我。

### 4. 决策疲劳维度分析 (Decision Fatigue Lens)

EU框架通过**决策前置**和**程序自动化**应对意志力耗竭。

**预承诺策略**: 在决策状态良好时设定EU计算规则和阈值，将复杂的权衡分析转化为疲劳时的简单执行。这是**尤利西斯合约**的数学版本——用事前理性设计约束事后冲动。

**启发式授权**: 当完整EU计算过于耗费认知资源时，框架支持启用**满意启发式**——设置可接受的EU阈值，达到即停止搜索，避免**最大化疲劳**。

**选项简化协议**: 面对过多选项时，EU框架提供系统性的删减标准——剔除被支配选项（存在全面更优的替代）、聚类相似选项、按EU排序后只考虑前3名。

**情绪标记系统**: 前景理论揭示的情绪影响（损失厌恶、反射效应）可以被用作**元认知标记**。当检测到"损失域决策"或"小概率事件评估"时，自动触发更严格的EU计算审查。

### 5. 选择架构维度分析 (Choice Architecture Lens)

EU/前景理论是**理性选择架构**的设计蓝图。

**属性显著性设计**: 框架要求显式识别所有可能结果和概率，这种结构强制将隐性假设暴露。设计师可以利用这一点，通过**信息排序**影响决策——先呈现高概率结果建立合理预期，或先呈现参考点锚定评估标准。

**选项组织策略**: EU理论要求选项间的独立性公理，但在现实中选项往往相互关联。框架支持设计**选项分类**——将相似EU的选项归为一类，突出展示EU差异显著的跨类选择。

**错误容忍结构**: 前景理论的非线性价值函数意味着小错误在损失域被放大、在收益域被缩小。选择架构应设计**损失域的额外确认步骤**（如"您确定要出售？"），而收益域可以流畅处理。

**学习反馈循环**: EU计算的结果（实际获得的效用）与事前估计的对比，构成**元认知反馈**。架构设计应记录这些偏差，提供个性化的校准建议（"您过去高估成功概率平均30%"）。

---

## 偏差纠偏实操指南

### 损失厌恶中和协议

```
当检测到损失域决策时:
1. 强制30分钟冷静期
2. 重新框定为收益域: "如果从头开始，我会选择..."
3. 计算边际EU而非总EU
4. 引入外部审查
5. 设定硬性退出条件
```

### 概率校准训练

```
定期练习:
1. 对10个事件给出概率估计
2. 等待结果发生
3. 计算校准曲线: 估计70%的事件实际发生比例
4. 调整未来估计向校准曲线回归
目标: 估计70%的事件实际发生率应在60-80%区间
```

### 框架免疫训练

```
对同一决策尝试三种框架:
1. 收益框架: "有X概率获得..."
2. 损失框架: "有X概率损失..."
3. 中性框架: "结果A概率X，结果B概率Y"

如果三种框架导致不同选择，说明受框架效应影响，
应强制使用中性框架决策。
```

---

## 置信度标注

所有期望效用计算必须标注:
- **置信度**: 基于历史数据的概率准确度
- **证据链**: 概率估计的来源
- **敏感性**: 结果对参数变化的敏感程度

---

*理性决策需要数学，真实决策需要理解人性。*
*Know your biases, then defeat them with math.*
