# Persistent Agent - å…ƒåˆ†æ

## æ¦‚å†µ
| å±æ€§ | å†…å®¹ |
|------|------|
| è´¨é‡ | â­â­â­ (3/5) |
| åŠŸèƒ½ | è¿›ç¨‹å®ˆæŠ¤ä¸è‡ªåŠ¨ç®¡ç† |
| ç‰¹è‰² | å€Ÿé‰´systemd/pm2æˆç†Ÿæ¨¡å¼ |
| é•¿åº¦ | 66è¡Œ (åçŸ­) |

## é—®é¢˜è¯Šæ–­

### ğŸ”´ ä¸¥é‡ä¸è¶³
1. **æ— é…ç½®ç¤ºä¾‹** - å¦‚ä½•é…ç½®è‡ªåŠ¨å¯åŠ¨ã€èµ„æºé™åˆ¶ï¼Ÿ
2. **æ— æ•…éšœæ’æŸ¥** - è¿›ç¨‹å´©æºƒæ—¶å¦‚ä½•è¯Šæ–­ï¼Ÿ
3. **æ— é›†æˆè¯´æ˜** - å¦‚ä½•ä¸wake-upã€proactive-agenté…åˆï¼Ÿ

### ğŸŸ¡ å¾…å®Œå–„
1. ç¼ºå°‘æ—¥å¿—è½®è½¬çš„å…·ä½“é…ç½®
2. ç¼ºå°‘èµ„æºé™åˆ¶çš„è¯¦ç»†å‚æ•°
3. ç¼ºå°‘ç›‘æ§å‘Šè­¦æœºåˆ¶

## Lensåˆ†æ

### System Thinkingè§†è§’
```markdown
## ä½œä¸ºç³»ç»Ÿçš„Persistent Agent

è¾“å…¥: è¿›ç¨‹é…ç½®ã€èµ„æºçº¦æŸ
å¤„ç†: å®ˆæŠ¤è¿›ç¨‹å¾ªç¯ (ç›‘æ§â†’å†³ç­–â†’æ‰§è¡Œ)
è¾“å‡º: è¿›ç¨‹çŠ¶æ€ã€æ—¥å¿—ã€å‘Šè­¦
åé¦ˆ: é‡å¯æ¬¡æ•°â†’é€€é¿ç­–ç•¥

å…³é”®å›è·¯:
- R1: å´©æºƒâ†’é‡å¯â†’å†å´©æºƒ (éœ€äººå·¥ä»‹å…¥)
- B1: èµ„æºè¶…é™â†’é™åˆ¶â†’ç¨³å®š
```

### Control Theoryè§†è§’
```markdown
## è¿›ç¨‹æ§åˆ¶çš„åé¦ˆæœºåˆ¶

ç›®æ ‡çŠ¶æ€: è¿›ç¨‹è¿è¡Œä¸­
å®é™…çŠ¶æ€: ç›‘æ§æ£€æµ‹
è¯¯å·®: ç›®æ ‡â‰ å®é™… â†’ è§¦å‘é‡å¯

æ§åˆ¶ç­–ç•¥:
- å¼€å…³æ§åˆ¶: start/stop
- PIDæ§åˆ¶: èµ„æºè°ƒèŠ‚ (éœ€æ‰©å±•)
- è‡ªé€‚åº”: æŒ‡æ•°é€€é¿
```

### Lean Thinkingè§†è§’
```markdown
## æµªè´¹è¯†åˆ«

| æµªè´¹ç±»å‹ | è¡¨ç° | æ”¹è¿› |
|----------|------|------|
| ç­‰å¾… | å´©æºƒåæ— è‡ªåŠ¨æ¢å¤ | è‡ªåŠ¨é‡å¯ |
| è¿‡åº¦å¤„ç† | é¢‘ç¹é‡å¯æ— è¯Šæ–­ | æ·»åŠ é€€é¿ |
| åº“å­˜ | æ—¥å¿—æ— é™å¢é•¿ | è‡ªåŠ¨è½®è½¬ |
| ç¼ºé™· | èµ„æºæ³„æ¼æœªæ£€æµ‹ | æ·»åŠ ç›‘æ§ |
```

## æ”¹è¿›æ–¹æ¡ˆ

### æ·»åŠ é…ç½®æ¨¡æ¿
```yaml
# persistent-agent-config.yaml
agent:
  name: "my-trading-bot"
  cmd: "python trading_bot.py"
  
auto_start: true
restart_policy: "always"  # always|on-failure|never

backoff:
  initial_delay: 1s
  max_delay: 60s
  multiplier: 2

resources:
  cpu_limit: "50%"
  memory_limit: "512MB"
  
logging:
  max_size: "100MB"
  max_files: 5
  compress: true

health_check:
  interval: "30s"
  timeout: "5s"
  retries: 3
```

### æ·»åŠ æ•…éšœæ’æŸ¥æŒ‡å—
```markdown
## æ•…éšœæ’æŸ¥æµç¨‹

1. æ£€æŸ¥çŠ¶æ€: `persistent-agent status my-agent`
2. æŸ¥çœ‹æ—¥å¿—: `persistent-agent logs my-agent --tail 100`
3. æ£€æŸ¥èµ„æº: `persistent-agent stats my-agent`
4. æ‰‹åŠ¨é‡å¯: `persistent-agent restart my-agent --reset-backoff`

å¸¸è§æ•…éšœ:
- å¯åŠ¨å¾ªç¯ â†’ æ£€æŸ¥cmdè·¯å¾„
- èµ„æºè¶…é™ â†’ è°ƒæ•´limits
- å¥åº·æ£€æŸ¥å¤±è´¥ â†’ æ£€æŸ¥ç½‘ç»œ/ä¾èµ–
```

## ä¼˜å…ˆçº§: P0
- å†…å®¹ä¸¥é‡ä¸è¶³ï¼Œæ€¥éœ€æ‰©å±•
- ä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œå½±å“æ‰€æœ‰é•¿æœŸè¿è¡Œä»»åŠ¡
- éœ€è¦æ·»åŠ é…ç½®ç¤ºä¾‹å’Œæ•…éšœæ’æŸ¥

---
**Tokens: ~1,100**
