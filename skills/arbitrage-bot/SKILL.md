# Arbitrage Bot

**è·¨DEXå¥—åˆ©ç›‘æ§ç³»ç»Ÿ** - åŸºäºæœŸæœ›æ•ˆç”¨ä¸å‰æ™¯ç†è®ºçš„ç†æ€§å†³ç­–æ¡†æ¶

---

## æ¦‚è¿°

æœ¬Skillæä¾›è·¨DEXå¥—åˆ©æœºä¼šçš„è¯†åˆ«ã€è¯„ä¼°å’Œæ‰§è¡Œèƒ½åŠ›ã€‚ä¸ç®€å•"å‘ç°å³æ‰§è¡Œ"ä¸åŒï¼Œæœ¬ç³»ç»Ÿå¼•å…¥**æœŸæœ›æ•ˆç”¨è®¡ç®—**å’Œ**è®¤çŸ¥åå·®é˜²èŒƒ**æœºåˆ¶ï¼Œç¡®ä¿å¥—åˆ©å†³ç­–çš„ç†æ€§å’Œå¯æŒç»­æ€§ã€‚

---

## æ ¸å¿ƒç‰¹æ€§

### ğŸ§  æ™ºèƒ½å†³ç­–æ¡†æ¶

åŸºäºKahneman-Tverskyå‰æ™¯ç†è®ºçš„å†³ç­–æ¨¡å‹ï¼š

```
å†³ç­–æ•ˆç”¨ = P(æˆåŠŸ) Ã— U(åˆ©æ¶¦) - P(å¤±è´¥) Ã— U(æŸå¤±) Ã— Î»

å…¶ä¸­: Î» = 2.25 (æŸå¤±åŒæ¶ç³»æ•°)
```

### ğŸ“Š æ¦‚ç‡è¯„ä¼°çŸ©é˜µ

| é£é™©å› å­ | æ¦‚ç‡èŒƒå›´ | å½±å“æƒé‡ | æ£€æµ‹æ–¹æ³• |
|----------|----------|----------|----------|
| MEVæŠ¢è·‘ | 15-40% | 0.4 | mempoolç›‘æ§ |
| æ»‘ç‚¹è¶…æ ‡ | 10-25% | 0.3 | æµåŠ¨æ€§åˆ†æ |
| Gasæ³¢åŠ¨ | 5-15% | 0.2 | gasé¢„è¨€æœº |
| åˆçº¦é£é™© | 0.1-2% | 1.0 | å®¡è®¡çŠ¶æ€æ£€æŸ¥ |

### âš ï¸ è®¤çŸ¥åå·®é˜²æŠ¤

| åå·®ç±»å‹ | è¡¨ç° | é˜²æŠ¤æœºåˆ¶ |
|----------|------|----------|
| æŸå¤±åŒæ¶ | å¯¹Gasè´¹è¿‡åº¦æ•æ„Ÿ | é¢„è®¾æœ€å°åˆ©æ¶¦é˜ˆå€¼ |
| åå°„æ•ˆåº” | è¿ç»­äºæŸåæ¿€è¿›äº¤æ˜“ | è‡ªåŠ¨å†·å´æœŸæœºåˆ¶ |
| æ²‰æ²¡æˆæœ¬ | åšæŒäºæŸäº¤æ˜“ | ç¡¬æ€§æ­¢æŸè§„åˆ™ |
| è¿‡åº¦è‡ªä¿¡ | é«˜ä¼°æˆåŠŸç‡ | å¼ºåˆ¶å›æµ‹éªŒè¯ |

---

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€å¥—åˆ©æ‰§è¡Œ

```bash
# è‡ªåŠ¨è¯„ä¼°å¹¶æ‰§è¡Œï¼ˆæ¨èï¼‰
python scripts/arbitrage.py execute --pair ETH/USDC --min-profit 50

# ä»…è¯„ä¼°ä¸æ‰§è¡Œ
python scripts/arbitrage.py evaluate --pair ETH/USDC --show-eu

# æ‰¹é‡ç›‘æ§å¤šä¸ªäº¤æ˜“å¯¹
python scripts/arbitrage.py monitor --pairs "ETH/USDC,WBTC/ETH,LINK/ETH" --interval 10
```

### é«˜çº§é…ç½®

```bash
# è‡ªå®šä¹‰é£é™©å‚æ•°
python scripts/arbitrage.py execute \
  --pair ETH/USDC \
  --risk-profile conservative \
  --max-slippage 0.5 \
  --min-eu-threshold 20

# å¤šé“¾å¥—åˆ©
python scripts/arbitrage.py cross-chain \
  --source-chain ethereum \
  --target-chain arbitrum \
  --token USDC \
  --amount 10000
```

---

## æœŸæœ›æ•ˆç”¨è®¡ç®—è¯¦è§£

### å†³ç­–å…¬å¼

```python
# æœŸæœ›æ•ˆç”¨è®¡ç®—
EU = (p_success Ã— utility_profit) - (p_failure Ã— utility_loss Ã— Î»)

# æ•ˆç”¨å‡½æ•°ï¼ˆå‡¹å‡½æ•°åæ˜ è¾¹é™…æ•ˆç”¨é€’å‡ï¼‰
def utility(x):
    if x >= 0:
        return x ** 0.88  # æ”¶ç›ŠåŸŸ
    else:
        return -2.25 * ((-x) ** 0.88)  # æŸå¤±åŸŸ

# æˆåŠŸæ¦‚ç‡åˆ†è§£
p_success = (1 - p_mev) Ã— (1 - p_slippage) Ã— (1 - p_gas_spike) Ã— (1 - p_contract)
```

### è®¡ç®—ç¤ºä¾‹

**åœºæ™¯**: ETH/USDCåœ¨Uniswapå’ŒSushiswapå­˜åœ¨$150ä»·æ ¼å·®å¼‚

```
è¾“å…¥å‚æ•°:
â”œâ”€ æ½œåœ¨åˆ©æ¶¦: $150
â”œâ”€ Gasæˆæœ¬: $25
â”œâ”€ P(MEVæŠ¢è·‘): 25%
â”œâ”€ P(æ»‘ç‚¹è¶…æ ‡): 15%
â”œâ”€ P(Gasé£™å‡): 10%
â””â”€ P(åˆçº¦é—®é¢˜): 0.5%

è®¡ç®—è¿‡ç¨‹:
P(æˆåŠŸ) = 0.75 Ã— 0.85 Ã— 0.90 Ã— 0.995 = 0.57 (57%)

æ•ˆç”¨è®¡ç®—:
â”œâ”€ æˆåŠŸæ•ˆç”¨: U(125) = 125^0.88 = 77.3
â”œâ”€ MEVå¤±è´¥: U(-25) = -2.25 Ã— 25^0.88 = -42.1
â”œâ”€ æ»‘ç‚¹å¤±è´¥: U(-25) = -42.1
â””â”€ å…¶ä»–å¤±è´¥: U(-25) = -42.1

EU = 0.57Ã—77.3 - 0.25Ã—42.1 - 0.15Ã—42.1 - 0.10Ã—42.1 - 0.005Ã—42.1
   = 44.1 - 21.1 = +23.0

å†³ç­–: EU > é˜ˆå€¼(20)ï¼Œæ‰§è¡Œå¥—åˆ©
```

---

## å› æœæ¨æ–­æ¡†æ¶

### å¥—åˆ©æˆåŠŸçš„å› æœå›¾

```
                    å¸‚åœºæ³¢åŠ¨ç‡ (æ··æ·†å˜é‡)
                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                   â†“                   â†“
ä»·æ ¼å·®å¼‚ â†â”€â”€â”€â”€ æµåŠ¨æ€§æ·±åº¦ â”€â”€â”€â”€â†’ æ»‘ç‚¹æˆæœ¬
    â†“                   â†“                   â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ å¥—åˆ©æœºä¼š â†â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
              æ‰§è¡Œå†³ç­–
                   â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“              â†“              â†“
Gasä»·æ ¼      MEVç«äº‰å¼ºåº¦    ç½‘ç»œå»¶è¿Ÿ
    â†“              â†“              â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ å®é™…åˆ©æ¶¦ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ´å¯Ÿ**: å¿…é¡»æ§åˆ¶æ··æ·†å˜é‡æ‰èƒ½å‡†ç¡®ä¼°è®¡å› æœæ•ˆåº”

### åé—¨å‡†åˆ™åº”ç”¨

è¦ä¼°è®¡"ä»·æ ¼å·®å¼‚ â†’ åˆ©æ¶¦"çš„å› æœæ•ˆåº”ï¼Œéœ€è¦æ§åˆ¶ï¼š
1. **å¸‚åœºæ³¢åŠ¨ç‡** (é€šè¿‡VIXç­‰æ•ˆæŒ‡æ ‡)
2. **æµåŠ¨æ€§æ·±åº¦** (æ± å­TVL)
3. **ç½‘ç»œæ‹¥å µçŠ¶æ€** (å¾…å¤„ç†äº¤æ˜“æ•°)

æ§åˆ¶å…¬å¼: `P(åˆ©æ¶¦|do(ä»·æ ¼å·®å¼‚)) = Î£ P(åˆ©æ¶¦|ä»·æ ¼å·®å¼‚, æ··æ·†å˜é‡) Ã— P(æ··æ·†å˜é‡)`

---

## å¯è¯ä¼ªæ€§è®¾è®¡

### æ ¸å¿ƒå‡è®¾ä¸è¯ä¼ªæ ‡å‡†

**å‡è®¾1**: "è·¨DEXå¥—åˆ©ç­–ç•¥èƒ½äº§ç”Ÿæ­£æœŸæœ›æ”¶ç›Š"

| ç»´åº¦ | è¯„ä¼° | æ”¹è¿›åæ ‡å‡† |
|------|------|------------|
| å…·ä½“æ€§ | "æ­£æ”¶ç›Š"å®šä¹‰æ¨¡ç³Š | "æœˆå‡€åˆ©æ¶¦ > $500" |
| å¯è§‚æµ‹ | âœ“ åˆ©æ¶¦å¯æµ‹é‡ | âœ“ |
| å¯é‡å¤ | âœ“ è·¨å¸‚åœºæµ‹è¯• | âœ“ |
| å¯åé©³ | â–³ éœ€æ˜ç¡®æ¡ä»¶ | "è¿ç»­2å‘¨äºæŸ" |
| é£é™©è¾¹ç•Œ | âœ— æ— é€€å‡ºæ¡ä»¶ | "æœ¬é‡‘æŸå¤±>20%é€€å‡º" |

**è¯ä¼ªè§¦å‘ç‚¹:**
```
ç«‹å³åœæ­¢æ¡ä»¶:
â”œâ”€ å•æ—¥äºæŸ > æœ¬é‡‘çš„5%
â”œâ”€ è¿ç»­3æ¬¡æ‰§è¡Œå¤±è´¥
â”œâ”€ èƒœç‡ < 40% æŒç»­7å¤©
â””â”€ ç´¯è®¡äºæŸ > æœ¬é‡‘çš„20%

ç­–ç•¥é‡è¯„æ¡ä»¶:
â”œâ”€ è¿ç»­5å¤©æ— åˆæ ¼æœºä¼š
â”œâ”€ Gasä»·æ ¼ä¸­ä½æ•° > 100 gwei æŒç»­3å¤©
â””â”€ ç›‘æµ‹åˆ°æ–°çš„MEVç«äº‰æ¨¡å¼
```

### A/Bæµ‹è¯•æ¡†æ¶

```python
# æµ‹è¯•ä¸åŒè§¦å‘é˜ˆå€¼
def test_thresholds():
    variants = [
        {'min_profit': 50, 'min_eu': 15},   # æ¿€è¿›
        {'min_profit': 100, 'min_eu': 25},  # å¹³è¡¡
        {'min_profit': 200, 'min_eu': 40},  # ä¿å®ˆ
    ]
    
    for variant in variants:
        result = run_backtest(variant, period='30d')
        # è¯ä¼ªæ ‡å‡†: ROI < 0%
        if result.roi < 0:
            mark_falsified(variant)
```

---

## è®¤è¯†è®ºæ ¡å‡†

### è´å¶æ–¯ä¿¡å¿µæ›´æ–°

```
åˆå§‹ä¿¡å¿µ: "æ­¤æœºä¼š profitable" P = 50%

è¯æ®æ”¶é›†:
â”œâ”€ E1: ä»·æ ¼å·®å¼‚ > 100bps â†’ P = 65%
â”œâ”€ E2: æµåŠ¨æ€§å……è¶³ â†’ P = 75%
â”œâ”€ E3: Gasä»·æ ¼é€‚ä¸­ â†’ P = 80%
â””â”€ E4: æ— å¼‚å¸¸MEVæ´»åŠ¨ â†’ P = 85%

æ‰§è¡Œåæ›´æ–°:
â”œâ”€ æˆåŠŸ â†’ æ›´æ–°æˆåŠŸæ¦‚ç‡æ¨¡å‹
â””â”€ å¤±è´¥ â†’ åˆ†æå¤±è´¥åŸå› ï¼Œæ›´æ–°P(é£é™©å› å­)
```

### ç½®ä¿¡åº¦æ ‡æ³¨

æ‰€æœ‰å¥—åˆ©ä¿¡å·å¿…é¡»æ ‡æ³¨ç½®ä¿¡åº¦ï¼š

| ç½®ä¿¡åº¦ | æ¡ä»¶ | è¡ŒåŠ¨ |
|--------|------|------|
| é«˜ (>80%) | æ‰€æœ‰æŒ‡æ ‡æœ‰åˆ© | å…¨é¢æ‰§è¡Œ |
| ä¸­ (60-80%) | éƒ¨åˆ†æŒ‡æ ‡ä¸ç¡®å®š | 50%ä»“ä½ |
| ä½ (40-60%) | å¤šä¸ªé£é™©å› å­ | 25%ä»“ä½æˆ–æ”¾å¼ƒ |
| æä½ (<40%) | æ¡ä»¶ä¸åˆ© | æ”¾å¼ƒ |

### å¤–éƒ¨è§†è§’åŸºå‡†

**å†…éƒ¨è§†è§’**: "æˆ‘çš„ç›‘æ§å‘ç°äº†è¿™ä¸ªæœºä¼š"
**å¤–éƒ¨è§†è§’**: "ç±»ä¼¼ç­–ç•¥çš„è¡Œä¸šåŸºå‡†æˆåŠŸç‡æ˜¯30%"

å†³ç­–è§„åˆ™: åˆå§‹P(æˆåŠŸ) = max(å†…éƒ¨ä¼°è®¡, å¤–éƒ¨åŸºå‡† Ã— 0.8)

---

## é£é™©ç®¡ç†

### é£é™©çŸ©é˜µ

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| æ™ºèƒ½åˆçº¦æ¼æ´ | 0.5% | å…¨éƒ¨èµ„é‡‘ | ä»…ä½¿ç”¨å®¡è®¡åè®® |
| MEVä¸‰æ˜æ²»æ”»å‡» | 25% | GasæŸå¤± | Flashbots/Eden Network |
| ä»·æ ¼å‰§çƒˆæ³¢åŠ¨ | 15% | æ»‘ç‚¹äºæŸ | è®¾ç½®2%æœ€å¤§æ»‘ç‚¹ |
| Gasä»·æ ¼é£™å‡ | 20% | åˆ©æ¶¦ä¾µèš€ | åŠ¨æ€Gasç­–ç•¥ |
| RPCèŠ‚ç‚¹æ•…éšœ | 5% | æ‰§è¡Œå»¶è¿Ÿ | å¤šèŠ‚ç‚¹å¤‡ä»½ |

### é£é™©æ§åˆ¶æ¸…å•

- [ ] å•ç¬”äº¤æ˜“é‡‘é¢ â‰¤ æ€»èµ„é‡‘çš„10%
- [ ] æ¯æ—¥æœ€å¤§äºæŸ â‰¤ æ€»èµ„é‡‘çš„5%
- [ ] ä»…ä¸TVL > $10M çš„æ± å­äº¤äº’
- [ ] åˆçº¦å¿…é¡»é€šè¿‡Certik/Trail of Bitså®¡è®¡
- [ ] æµ‹è¯•ç½‘éªŒè¯æ‰€æœ‰æ–°ç­–ç•¥
- [ ] 24/7ç›‘æ§å¼‚å¸¸äº¤æ˜“æ¨¡å¼

---

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒç»„ä»¶

```
arbitrage-bot/
â”œâ”€â”€ evaluator/          # æœŸæœ›æ•ˆç”¨è®¡ç®—å¼•æ“
â”‚   â”œâ”€â”€ probability.py  # æ¦‚ç‡ä¼°è®¡æ¨¡å—
â”‚   â”œâ”€â”€ utility.py      # æ•ˆç”¨å‡½æ•°å®ç°
â”‚   â””â”€â”€ decision.py     # å†³ç­–è§„åˆ™å¼•æ“
â”œâ”€â”€ monitor/            # å¸‚åœºç›‘æ§
â”‚   â”œâ”€â”€ dex_watcher.py  # DEXä»·æ ¼ç›‘æ§
â”‚   â”œâ”€â”€ mempool.py      # Mempoolåˆ†æ
â”‚   â””â”€â”€ risk_oracle.py  # é£é™©æŒ‡æ ‡èšåˆ
â”œâ”€â”€ executor/           # äº¤æ˜“æ‰§è¡Œ
â”‚   â”œâ”€â”€ flashbots.py    # MEVä¿æŠ¤æäº¤
â”‚   â”œâ”€â”€ gas_optimizer.py # Gasç­–ç•¥
â”‚   â””â”€â”€ simulator.py    # æ¨¡æ‹Ÿæ‰§è¡Œ
â””â”€â”€ analytics/          # åˆ†æä¸æ ¡å‡†
    â”œâ”€â”€ backtest.py     # å›æµ‹æ¡†æ¶
    â”œâ”€â”€ calibration.py  # ä¿¡å¿µæ ¡å‡†
    â””â”€â”€ falsifiability.py # è¯ä¼ªæ£€æŸ¥
```

### é…ç½®ç¤ºä¾‹

```json
{
  "risk_profile": "balanced",
  "min_expected_utility": 20,
  "max_slippage": 0.02,
  "max_gas_ratio": 0.3,
  "loss_aversion": 2.25,
  "confidence_threshold": 0.7,
  "falsifiability": {
    "max_daily_loss": 0.05,
    "max_total_drawdown": 0.20,
    "min_win_rate": 0.40,
    "evaluation_period_days": 7
  }
}
```

---

## ç›‘æ§æŒ‡æ ‡

### å…³é”®æŒ‡æ ‡ä»ªè¡¨æ¿

| æŒ‡æ ‡ | ç›®æ ‡ | é¢„è­¦çº¿ |
|------|------|--------|
| èƒœç‡ | >50% | <40% |
| å¹³å‡åˆ©æ¶¦ | >$50 | <$30 |
| æœ€å¤§å›æ’¤ | <15% | >20% |
| å¤æ™®æ¯”ç‡ | >1.5 | <1.0 |
| é¢„æµ‹æ ¡å‡† | 80%ç½®ä¿¡åº¦â†’80%å‡†ç¡®ç‡ | åå·®>15% |

---

## ç‰ˆæœ¬ä¿¡æ¯

- **Version**: 2.0.0 (å†³ç­–æ¡†æ¶å¢å¼ºç‰ˆ)
- **Author**: KbotGenesis
- **Last Updated**: 2026-02-20
- **Frameworks**: Expected Utility, Prospect Theory, Causal Inference, Falsifiability, Epistemic Reasoning
