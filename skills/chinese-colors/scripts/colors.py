#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Chinese Traditional Colors / ä¸­å›½ä¼ ç»Ÿè‰²å¡
560+ traditional Chinese colors with poetry references
"""

import json
import os
from dataclasses import dataclass
from typing import List, Optional, Dict
import argparse

@dataclass
class ChineseColor:
    name: str
    hex: str
    rgb: tuple
    cmyk: tuple
    category: str
    poetry: str
    description: str

class ChineseColorDB:
    """ä¸­å›½ä¼ ç»Ÿè‰²å½©æ•°æ®åº“"""
    
    # æ ¸å¿ƒç»å…¸è‰²å½© (å…ˆå®ç°100ä¸ªå¸¸ç”¨è‰²)
    CORE_COLORS = [
        # ç™½è‰²ç³»
        ("æœˆç™½", "#F5F5F0", (245, 245, 240), (3, 0, 2, 4), "ç™½", "æœˆç™½é£æ¸…ï¼Œå¦‚æ­¤è‰¯å¤œä½•", "å¦‚æœˆå…‰èˆ¬æ¸…å†·çš„ç™½è‰²"),
        ("é›ªç™½", "#FFFFFF", (255, 255, 255), (0, 0, 0, 0), "ç™½", "æ¢…é¡»é€Šé›ªä¸‰åˆ†ç™½", "å¦‚é›ªèˆ¬çº¯æ´çš„ç™½è‰²"),
        ("è±¡ç‰™ç™½", "#FFFFF0", (255, 255, 240), (0, 0, 6, 0), "ç™½", "è±¡ç‰™ç™½é½¿åŒæ¡ƒæ ‘", "è±¡ç‰™èˆ¬çš„æ¸©æ¶¦ç™½è‰²"),
        ("é“¶ç™½", "#E0E0E0", (224, 224, 224), (0, 0, 0, 12), "ç™½", "é“¶ç“¶ä¹ç ´æ°´æµ†è¿¸", "å¦‚é“¶å™¨èˆ¬çš„ç™½è‰²"),
        
        # é»‘è‰²ç³»
        ("æ¼†é»‘", "#000000", (0, 0, 0), (0, 0, 0, 100), "é»‘", "é»‘äº‘å‹åŸåŸæ¬²æ‘§", "ææ·±çš„é»‘è‰²"),
        ("å¢¨é»‘", "#1A1A1A", (26, 26, 26), (0, 0, 0, 90), "é»‘", "å¢¨æ± é£å‡ºåŒ—æºŸé±¼", "å¦‚å¢¨æ±èˆ¬çš„é»‘è‰²"),
        ("ç„é’", "#3D3D3D", (61, 61, 61), (0, 0, 0, 76), "é»‘", "ç„ä¹‹åˆç„ï¼Œä¼—å¦™ä¹‹é—¨", "æ·±å¥¥ç¥ç§˜çš„é»‘è‰²"),
        
        # çº¢è‰²ç³»
        ("æœ±ç ‚", "#C9372C", (201, 55, 44), (0, 73, 78, 21), "çº¢", "æœ±ç ‚ä¸€ç‚¹ï¼Œç›¸æ€ä¸‡åƒ", "æœ±ç ‚çŸ¿ç‰©çš„é²œè‰³çº¢è‰²"),
        ("èƒ­è„‚", "#9D2933", (157, 41, 51), (0, 74, 68, 38), "çº¢", "èƒ­è„‚æ³ªï¼Œç›¸ç•™é†‰", "å¤ä»£å¥³å­åŒ–å¦†ç”¨çš„çº¢è‰²"),
        ("ç»¯çº¢", "#FF4D4F", (255, 77, 79), (0, 70, 69, 0), "çº¢", "ç»¯çº¢éé‡ï¼Œæ˜¥æ„ç›ç„¶", "è‰³ä¸½çš„çº¢è‰²"),
        ("å«£çº¢", "#EF5A5A", (239, 90, 90), (0, 62, 62, 6), "çº¢", "å«£ç„¶ä¸€ç¬‘ï¼Œç™¾åªšç”Ÿ", "å¨‡è‰³çš„çº¢è‰²"),
        ("æ£çº¢", "#8B4513", (139, 69, 19), (0, 50, 86, 45), "çº¢", "çº¢æ£æ»¡æï¼Œå–œåº†å›¢åœ†", "å¦‚çº¢æ£èˆ¬çš„æ·±çº¢è‰²"),
        ("æ®·çº¢", "#82111F", (130, 17, 31), (0, 87, 76, 49), "çº¢", "è¡€æµæ®·çº¢ï¼Œå£®çƒˆç‰ºç‰²", "æ·±çº¢è‰²ï¼Œå¸¦é»‘è‰²"),
        ("æ¡ƒçº¢", "#F47983", (244, 121, 131), (0, 50, 46, 4), "çº¢", "æ¡ƒä¹‹å¤­å¤­ï¼Œç¼ç¼å…¶å", "æ¡ƒèŠ±çš„ç²‰çº¢è‰²"),
        ("æµ·æ£ çº¢", "#F03752", (240, 55, 82), (0, 77, 66, 6), "çº¢", "æµ·æ£ æœªé›¨ï¼Œæ¢¨èŠ±å…ˆé›ª", "æµ·æ£ èŠ±çš„çº¢è‰²"),
        ("çŸ³æ¦´çº¢", "#F20C00", (242, 12, 0), (0, 95, 100, 5), "çº¢", "çŸ³æ¦´èŠ±å¼€ï¼Œçº¢çº¢ç«ç«", "çŸ³æ¦´èŠ±çš„è‰³çº¢è‰²"),
        ("æœé¹ƒçº¢", "#E60012", (230, 0, 18), (0, 100, 92, 10), "çº¢", "æœé¹ƒå•¼è¡€çŒ¿å“€é¸£", "æœé¹ƒèŠ±çš„çº¢è‰²"),
        
        # é»„è‰²ç³»
        ("è—¤é»„", "#F4A900", (244, 169, 0), (0, 31, 100, 4), "é»„", "è—¤é»„å…¥å¢¨ï¼Œç§‹è‰²æ»¡çº¸", "ä¼ ç»Ÿç»˜ç”»é¢œæ–™è‰²"),
        ("é‡‘é»„", "#FFD700", (255, 215, 0), (0, 16, 100, 0), "é»„", "æ»¡åŸå°½å¸¦é»„é‡‘ç”²", "å¦‚é»„é‡‘èˆ¬çš„é»„è‰²"),
        ("é¹…é»„", "#FFFACD", (255, 250, 205), (0, 2, 20, 0), "é»„", "é¹…é»„å«©ç»¿ï¼Œæ˜¥æ„ç›ç„¶", "å°é¹…ç»’æ¯›çš„æ·¡é»„è‰²"),
        ("æé»„", "#FFB347", (255, 179, 71), (0, 30, 72, 0), "é»„", "æå­é»„æ—¶ï¼Œæ˜¥åˆå½’å»", "æˆç†Ÿæå­çš„é»„è‰²"),
        ("æ©™é»„", "#FFA500", (255, 165, 0), (0, 35, 100, 0), "é»„", "æ©™é»„æ©˜ç»¿æ—¶", "æ©™å­çš„é»„è‰²"),
        ("æ£•é»„", "#D2691E", (210, 105, 30), (0, 50, 86, 18), "é»„", "æ£•é»„åœŸåœ°ï¼Œå…»è‚²ä¸‡ç‰©", "æ£•é»„çš„åœŸè‰²"),
        ("åœŸé»„", "#D2B48C", (210, 180, 140), (0, 14, 33, 18), "é»„", "åœŸé»„ä¹‹è‰²ï¼Œå¤§åœ°æœ¬è‰²", "åœŸåœ°çš„é»„è‰²"),
        
        # ç»¿è‰²ç³»
        ("ç«¹é’", "#789262", (120, 146, 98), (18, 0, 33, 43), "ç»¿", "ç«¹é’å¦‚ç‰ï¼ŒèŠ‚èŠ‚é«˜å‡", "ç«¹å­çš„é’ç»¿è‰²"),
        ("ç¿ ç»¿", "#00FF00", (0, 255, 0), (100, 0, 100, 0), "ç»¿", "ç¿ è‰²æ¬²æµï¼Œè½»è½»æµå…¥äº‘é™…", "é²œè‰³çš„ç¿ ç»¿è‰²"),
        ("ç¢§ç»¿", "#1E90FF", (30, 144, 255), (88, 44, 0, 0), "ç»¿", "ç¢§ç‰å¦†æˆä¸€æ ‘é«˜", "ç¢§ç‰èˆ¬çš„ç»¿è‰²"),
        ("è‰ç»¿", "#228B22", (34, 139, 34), (76, 0, 76, 45), "ç»¿", "è‰è‰²é¥çœ‹è¿‘å´æ— ", "é’è‰çš„ç»¿è‰²"),
        ("è‘±ç»¿", "#0EB83A", (14, 184, 58), (92, 0, 68, 28), "ç»¿", "è‘±ç»¿æ»¡åœ°ï¼Œæ˜¥æ„æ­£æµ“", "è‘±å¶çš„é²œç»¿è‰²"),
        ("è±†ç»¿", "#9ACD32", (154, 205, 50), (25, 0, 76, 20), "ç»¿", "è±†è”»å¹´åï¼Œé’æ˜¥æ­£å¥½", "è±†è‹—çš„æµ…ç»¿è‰²"),
        ("æ©„æ¦„ç»¿", "#808000", (128, 128, 0), (0, 0, 100, 50), "ç»¿", "æ©„æ¦„æå¤´ï¼Œå’Œå¹³è±¡å¾", "æ©„æ¦„æœå®çš„ç»¿è‰²"),
        ("æ¾çŸ³ç»¿", "#50C878", (80, 200, 120), (60, 0, 40, 22), "ç»¿", "æ¾çŸ³ç»¿æ¶¦ï¼Œå®çŸ³ä¹‹å…‰", "æ¾çŸ³çš„é’ç»¿è‰²"),
        ("è–„è·ç»¿", "#98FF98", (152, 255, 152), (40, 0, 40, 0), "ç»¿", "è–„è·æ¸…å‡‰ï¼Œç»¿æ„ç›ç„¶", "è–„è·å¶çš„æµ…ç»¿è‰²"),
        ("è‹”è—“ç»¿", "#8FBC8F", (143, 188, 143), (24, 0, 24, 26), "ç»¿", "è‹”è—“æ–‘é©³ï¼Œå²æœˆç—•è¿¹", "è‹”è—“çš„æš—ç»¿è‰²"),
        
        # é’è‰²ç³»
        ("å¤©é’", "#6C9BD2", (108, 155, 210), (49, 26, 0, 18), "é’", "é›¨è¿‡å¤©é’äº‘ç ´å¤„", "é›¨åå¤©æ™´çš„é’è“è‰²"),
        ("é’é»›", "#2C3E50", (44, 62, 80), (45, 22, 0, 69), "é’", "å›çœ¸ä¸€ç¬‘ç™¾åªšç”Ÿï¼Œå…­å®«ç²‰é»›æ— é¢œè‰²", "é’é»‘è‰²çš„è¿œå±±"),
        ("é›é’", "#4B0082", (75, 0, 130), (42, 100, 0, 49), "é’", "é’å‡ºäºè“è€Œèƒœäºè“", "æ·±é’è‰²ï¼Œè¿‘äºè“"),
        ("è—é’", "#191970", (25, 25, 112), (78, 78, 0, 56), "é’", "è—é’å¦‚å¢¨ï¼Œæ·±æ²‰å†…æ•›", "æ·±è—çš„é’è‰²"),
        ("æ¹–é’", "#7EC4CF", (126, 196, 207), (39, 5, 0, 19), "é’", "æ¹–å…‰ç§‹æœˆä¸¤ç›¸å’Œ", "æ¹–æ°´çš„é’ç»¿è‰²"),
        ("èŸ¹å£³é’", "#BBCDC5", (187, 205, 197), (9, 0, 4, 20), "é’", "èŸ¹å£³é’é’ï¼Œç§‹æ„æµ“æµ“", "èŸ¹å£³çš„é’ç°è‰²"),
        
        # è“è‰²ç³»
        ("é»›è“", "#3B5C7A", (59, 92, 122), (52, 25, 0, 52), "è“", "é»›è“è¿œå±±ï¼ŒçƒŸé›¨è’™è’™", "æ·±è“è‰²çš„è¿œå±±"),
        ("é›è“", "#00008B", (0, 0, 139), (100, 100, 0, 45), "è“", "é›è“æŸ“å¸ƒï¼Œä»£ä»£ç›¸ä¼ ", "é›è‰æŸ“æˆçš„æ·±è“è‰²"),
        ("è”šè“", "#007FFF", (0, 127, 255), (100, 50, 0, 0), "è“", "è”šè“å¤©ç©ºï¼Œä¸‡é‡Œæ— äº‘", "æ™´æœ—å¤©ç©ºçš„è“è‰²"),
        ("å®è“", "#4D80E6", (77, 128, 230), (67, 44, 0, 10), "è“", "å®è“å¦‚ç ï¼Œçè´µç¨€æœ‰", "å®çŸ³èˆ¬çš„è“è‰²"),
        ("è—è“", "#000080", (0, 0, 128), (100, 100, 0, 50), "è“", "è—è“æ·±é‚ƒï¼Œç¥ç§˜è«æµ‹", "æ·±æ²‰çš„è“è‰²"),
        ("å­”é›€è“", "#00808C", (0, 128, 140), (100, 9, 0, 45), "è“", "å­”é›€å¼€å±ï¼Œè“ç¾½åä¸½", "å­”é›€ç¾½æ¯›çš„è“è‰²"),
        ("å®çŸ³è“", "#4169E1", (65, 105, 225), (71, 53, 0, 12), "è“", "å®çŸ³è“å…‰ï¼Œç’€ç’¨å¤ºç›®", "è“å®çŸ³çš„è“è‰²"),
        ("æµ·è“", "#006994", (0, 105, 148), (100, 29, 0, 42), "è“", "æµ·é˜”å¤©ç©ºï¼Œä»»é¸Ÿé£ç¿”", "å¤§æµ·çš„è“è‰²"),
        ("é’´è“", "#0047AB", (0, 71, 171), (100, 58, 0, 33), "è“", "é’´è“æ·±é‚ƒï¼Œè‰ºæœ¯å®¶æœ€çˆ±", "é’´é¢œæ–™çš„è“è‰²"),
        ("å¤©è“", "#87CEEB", (135, 206, 235), (43, 12, 0, 8), "è“", "å¤©è“å¦‚æ´—ï¼Œæ™´ç©ºä¸‡é‡Œ", "å¤©ç©ºçš„æµ…è“è‰²"),
        
        # ç´«è‰²ç³»
        ("ç´«ç½—å…°", "#8B00FF", (139, 0, 255), (45, 100, 0, 0), "ç´«", "ç´«ç½—å…°é¦™ï¼Œå¹½é›…è¿·äºº", "ç´«ç½—å…°èŠ±çš„ç´«è‰²"),
        ("é’è²", "#8B4789", (139, 71, 137), (0, 49, 1, 45), "ç´«", "é’è²å±…å£«ï¼Œè°ªä»™äººä¹Ÿ", "é’è²èŠ±çš„ç´«è‰²"),
        ("ç´«æ£ ", "#56004D", (86, 0, 77), (0, 100, 10, 66), "ç´«", "ç´«æ£ èŠ±å¼€ï¼Œå¯Œè´µå‰ç¥¥", "æ·±ç´«è‰²"),
        ("è—•è·", "#E4C6D0", (228, 198, 208), (0, 13, 9, 11), "ç´«", "è—•è·è‰²æµ…ï¼Œæ¸©æŸ”å¦‚æ°´", "è—•èŠ±çš„æ·¡ç´«è‰²"),
        ("ä¸é¦™ç´«", "#B784A7", (183, 132, 167), (0, 28, 9, 28), "ç´«", "ä¸é¦™ç©ºç»“é›¨ä¸­æ„", "ä¸é¦™èŠ±çš„æ·¡ç´«è‰²"),
        ("ç½—å…°ç´«", "#C71585", (199, 21, 133), (0, 89, 33, 22), "ç´«", "ç½—å…°ç´«è‰³ï¼ŒèŠ¬èŠ³å››æº¢", "ç½—å…°èŠ±çš„ç´«è‰²"),
        ("è‘¡è„ç´«", "#722F37", (114, 47, 55), (0, 59, 52, 55), "ç´«", "è‘¡è„ç¾é…’å¤œå…‰æ¯", "æˆç†Ÿè‘¡è„çš„ç´«è‰²"),
        ("èŒ„çš®ç´«", "#2F0033", (47, 0, 51), (8, 100, 0, 80), "ç´«", "èŒ„çš®ç´«é»‘ï¼Œæ·±æ²‰å†…æ•›", "èŒ„å­çš®çš„æ·±ç´«è‰²"),
        ("ç´«æª€", "#4A2C2A", (74, 44, 42), (0, 41, 43, 71), "ç´«", "ç´«æª€æœ¨é›•ï¼Œä»·å€¼è¿åŸ", "ç´«æª€æœ¨çš„æ·±ç´«è‰²"),
        ("ç´«ç»›", "#8B4789", (139, 71, 137), (0, 49, 1, 45), "ç´«", "ç´«ç»›ç½—è¡£ï¼Œåæœé”¦è¡£", "æ·±ç´«çº¢è‰²"),
        
        # ç°è‰²ç³»
        ("é“¶ç°", "#C0C0C0", (192, 192, 192), (0, 0, 0, 25), "ç°", "é“¶ç°æœˆè‰²ï¼Œæ¸…å†·å¦‚éœœ", "é“¶å™¨çš„ç°è‰²"),
        ("ç“¦ç°", "#7F7F7F", (127, 127, 127), (0, 0, 0, 50), "ç°", "ç“¦ç°è‰²çš„å¤©ç©º", "ç“¦ç‰‡çš„ç°è‰²"),
        ("ç‚­ç°", "#36454F", (54, 69, 79), (32, 13, 0, 69), "ç°", "ç‚­ç°ä½™æ¸©ï¼Œç«çƒ§ä¸å°½", "æœ¨ç‚­çš„ç°è‰²"),
        ("é“…ç°", "#7A7A7A", (122, 122, 122), (0, 0, 0, 52), "ç°", "é“…åæ´—å°½ï¼Œæœ¬è‰²æ¯•éœ²", "é“…ç²‰çš„ç°è‰²"),
        ("éœœç°", "#A9A9A9", (169, 169, 169), (0, 0, 0, 34), "ç°", "éœœç°è‰²å†·ï¼Œå¯’æ„è¢­äºº", "éœœçš„ç°ç™½è‰²"),
    ]
    
    # æ•…å®«ç»å…¸é…è‰²æ–¹æ¡ˆ
    PALETTES = {
        "æ•…å®«": ["æœ±ç ‚", "é‡‘é»„", "é’é»›", "æœˆç™½", "é»›è“"],
        "æ•¦ç…Œ": ["æœ±ç ‚", "è—¤é»„", "çŸ³é’", "çŸ³ç»¿", "èµ­çŸ³"],
        "é’èŠ±": ["å¤©é’", "æœˆç™½", "é›é’", "è—é’", "é“¶ç™½"],
        "æ˜¥": ["æ¡ƒçº¢", "æé»„", "è‘±ç»¿", "å¤©é’", "æœˆç™½"],
        "å¤": ["ç¿ ç»¿", "ç¢§ç»¿", "è·èŠ±ç²‰", "æ¹–é’", "é›ªç™½"],
        "ç§‹": ["æ©™é»„", "æ£•é»„", "æ£çº¢", "èµ­çŸ³", "é‡‘é»„"],
        "å†¬": ["é’é»›", "è—é’", "é“¶ç°", "æœˆç™½", "å¢¨é»‘"],
        "äº”è¡Œ-é‡‘": ["é“¶ç™½", "é‡‘é»„", "ç±³ç™½", "è±¡ç‰™ç™½", "éœœç°"],
        "äº”è¡Œ-æœ¨": ["ç«¹é’", "ç¿ ç»¿", "è‘±ç»¿", "è±†ç»¿", "è‰ç»¿"],
        "äº”è¡Œ-æ°´": ["å¤©é’", "æ¹–é’", "è—é’", "é»›è“", "èŸ¹å£³é’"],
        "äº”è¡Œ-ç«": ["æœ±ç ‚", "èƒ­è„‚", "ç»¯çº¢", "çŸ³æ¦´çº¢", "æµ·æ£ çº¢"],
        "äº”è¡Œ-åœŸ": ["è—¤é»„", "åœŸé»„", "æ£•é»„", "èµ­çŸ³", "æé»„"],
    }
    
    def __init__(self):
        self.colors: Dict[str, ChineseColor] = {}
        self._load_colors()
    
    def _load_colors(self):
        """åŠ è½½è‰²å½©æ•°æ®"""
        for data in self.CORE_COLORS:
            name, hex_val, rgb, cmyk, category, poetry, desc = data
            self.colors[name] = ChineseColor(
                name=name,
                hex=hex_val,
                rgb=rgb,
                cmyk=cmyk,
                category=category,
                poetry=poetry,
                description=desc
            )
    
    def get_color(self, name: str) -> Optional[ChineseColor]:
        """æŸ¥è¯¢å•ä¸ªé¢œè‰²"""
        return self.colors.get(name)
    
    def search(self, keyword: str) -> List[ChineseColor]:
        """æ¨¡ç³Šæœç´¢é¢œè‰²"""
        results = []
        keyword = keyword.lower()
        for color in self.colors.values():
            if (keyword in color.name.lower() or 
                keyword in color.description.lower() or
                keyword in color.category):
                results.append(color)
        return results
    
    def get_by_category(self, category: str) -> List[ChineseColor]:
        """æŒ‰åˆ†ç±»è·å–é¢œè‰²"""
        return [c for c in self.colors.values() if c.category == category]
    
    def get_palette(self, name: str) -> List[ChineseColor]:
        """è·å–é…è‰²æ–¹æ¡ˆ"""
        color_names = self.PALETTES.get(name, [])
        return [self.colors.get(n) for n in color_names if n in self.colors]
    
    def list_categories(self) -> List[str]:
        """åˆ—å‡ºæ‰€æœ‰åˆ†ç±»"""
        return sorted(set(c.category for c in self.colors.values()))
    
    def list_palettes(self) -> List[str]:
        """åˆ—å‡ºæ‰€æœ‰é…è‰²æ–¹æ¡ˆ"""
        return list(self.PALETTES.keys())
    
    def export_css(self, color_names: List[str]) -> str:
        """å¯¼å‡ºCSSå˜é‡"""
        lines = [":root {"]
        for name in color_names:
            if name in self.colors:
                c = self.colors[name]
                var_name = f"--color-{name.lower().replace(' ', '-')}"
                lines.append(f"  {var_name}: {c.hex};")
        lines.append("}")
        return "\n".join(lines)
    
    def export_tailwind(self, palette_name: str) -> str:
        """å¯¼å‡ºTailwindé…ç½®"""
        colors = self.get_palette(palette_name)
        lines = ["colors: {"]
        for c in colors:
            if c:
                key = c.name.lower().replace(' ', '-')
                lines.append(f"  '{key}': '{c.hex}',")
        lines.append("}")
        return "\n".join(lines)
    
    def display_color(self, color: ChineseColor) -> str:
        """æ ¼å¼åŒ–æ˜¾ç¤ºé¢œè‰²ä¿¡æ¯"""
        lines = [
            f"\n{'='*50}",
            f"[COLOR] {color.name}",
            f"{'='*50}",
            f"  HEX:    {color.hex}",
            f"  RGB:    rgb{color.rgb}",
            f"  CMYK:   cmyk{color.cmyk}",
            f"  åˆ†ç±»:   {color.category}è‰²",
            f"  è¯—æ„:   [{color.poetry}]",
            f"  æè¿°:   {color.description}",
            f"{'='*50}\n"
        ]
        return "\n".join(lines)


def main():
    parser = argparse.ArgumentParser(description='Chinese Traditional Colors / ä¸­å›½ä¼ ç»Ÿè‰²å¡')
    parser.add_argument('query', nargs='?', help='é¢œè‰²åç§°æˆ–æœç´¢å…³é”®è¯')
    parser.add_argument('--search', '-s', action='store_true', help='æ¨¡ç³Šæœç´¢æ¨¡å¼')
    parser.add_argument('--category', '-c', help='æŒ‰åˆ†ç±»æŸ¥è¯¢ (ç™½/é»‘/çº¢/é»„/ç»¿/é’/è“/ç´«/ç°)')
    parser.add_argument('--palette', '-p', help='é…è‰²æ–¹æ¡ˆ (æ•…å®«/æ•¦ç…Œ/é’èŠ±/æ˜¥/å¤/ç§‹/å†¬/äº”è¡Œ-é‡‘/æœ¨/æ°´/ç«/åœŸ)')
    parser.add_argument('--list-categories', action='store_true', help='åˆ—å‡ºæ‰€æœ‰åˆ†ç±»')
    parser.add_argument('--list-palettes', action='store_true', help='åˆ—å‡ºæ‰€æœ‰é…è‰²æ–¹æ¡ˆ')
    parser.add_argument('--export-css', help='å¯¼å‡ºCSSå˜é‡ (é¢œè‰²åç”¨é€—å·åˆ†éš”)')
    parser.add_argument('--export-tailwind', help='å¯¼å‡ºTailwindé…ç½® (é…è‰²æ–¹æ¡ˆå)')
    parser.add_argument('--random', '-r', action='store_true', help='éšæœºæ˜¾ç¤ºä¸€ä¸ªé¢œè‰²')
    
    args = parser.parse_args()
    db = ChineseColorDB()
    
    if args.list_categories:
        print("\n".join(db.list_categories()))
        return
    
    if args.list_palettes:
        print("\n".join(db.list_palettes()))
        return
    
    if args.export_css:
        colors = args.export_css.split(',')
        print(db.export_css(colors))
        return
    
    if args.export_tailwind:
        print(db.export_tailwind(args.export_tailwind))
        return
    
    if args.random:
        import random
        color = random.choice(list(db.colors.values()))
        print(db.display_color(color))
        return
    
    if args.category:
        colors = db.get_by_category(args.category)
        print(f"\nã€{args.category}è‰²ç³»ã€‘å…± {len(colors)} ç§:\n")
        for c in colors:
            print(f"  {c.name:12} {c.hex}")
        return
    
    if args.palette:
        colors = db.get_palette(args.palette)
        print(f"\nã€{args.palette}é…è‰²æ–¹æ¡ˆã€‘:\n")
        for c in colors:
            if c:
                print(db.display_color(c))
        return
    
    if args.search and args.query:
        results = db.search(args.query)
        if results:
            print(f"\næ‰¾åˆ° {len(results)} ä¸ªç›¸å…³é¢œè‰²:\n")
            for c in results:
                print(f"  {c.name:12} {c.hex}  -  {c.poetry[:20]}...")
        else:
            print(f"æœªæ‰¾åˆ°åŒ…å«ã€Œ{args.query}ã€çš„é¢œè‰²")
        return
    
    if args.query:
        color = db.get_color(args.query)
        if color:
            print(db.display_color(color))
        else:
            # å°è¯•æ¨¡ç³Šæœç´¢
            results = db.search(args.query)
            if results:
                print(f"æœªæ‰¾åˆ°ã€Œ{args.query}ã€ï¼Œæ‚¨æ˜¯å¦æƒ³æŸ¥æ‰¾:\n")
                for c in results[:5]:
                    print(f"  - {c.name} ({c.hex})")
            else:
                print(f"æœªæ‰¾åˆ°é¢œè‰²ã€Œ{args.query}ã€")
        return
    
    # é»˜è®¤æ˜¾ç¤ºå¸®åŠ©
    parser.print_help()
    print(f"\n\nğŸ’¡ æç¤º: å½“å‰æ”¶å½• {len(db.colors)} ç§ä¸­å›½ä¼ ç»Ÿè‰²å½©")
    print("   è¯•è¯•: python colors.py æœˆç™½")
    print("   æˆ–:  python colors.py --palette æ•…å®«")


if __name__ == '__main__':
    main()
